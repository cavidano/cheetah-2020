"use strict";jQuery(document).ready(function(i){function e(i,e){var t=i.find('input[name="give-form-id"]').val(),a=i.find('input[name="give_gift_aid_address_option"]:radio:checked').val(),d=i.find("#give-gift-aid-address-wrap-"+t);i.find(".cc-address").length>0&&"another_address"!==a?i.find(".give-gift-check-is-billing-address").val("yes"):i.find(".give-gift-check-is-billing-address").val("no"),e?(d.find("input:text,input[type=email],select, textarea").attr("required",!0),d.find("#give_gift_aid_card_address_2_"+t).attr("required",!1)):(d.find("input:text,input[type=email],select, textarea").attr("required",!1),d.find("#give_gift_aid_card_address_2_"+t).attr("required",!1))}var t=i("body");i(this).on("give_gateway_loaded",function(){setTimeout(function(){a.init()},1)}),t.on("change",".give_gift_aid_address_option",function(){var e=i(this).closest("form.give-form");e||(e=i(this).parents("form")),a.give_gift_aid_check_address_option(e)}).change(),t.on("change","#billing_country",function(){var e=i(this).closest("form.give-form");e||(e=i(this).parents("form")),a.give_gift_aid_check_billing_country(e)}).change(),t.on("change",".give_gift_aid_accept_term_condition",function(){var e=i(this).closest("form.give-form");e||(e=i(this).parents("form"));var t=e.find('input[name="give_gift_aid_accept_term_condition"]').is(":checked"),a=e.find('input[name="give-form-id"]').val(),d=e.find('input[name="give_gift_aid_address_option"]:radio:checked').val(),n=e.find(".give-gift-aid-address-wrap");n.hide(),t&&n.show(),!t||"another_address"!==d&&0!==e.find(".cc-address").length?(e.find("#give-gift-aid-address-button-"+a).show(),e.find("#give-gift-aid-address-fields-"+a).hide(),n.find("input:text,input[type=email],select, textarea").attr("required",!1),n.find("#give_gift_aid_card_address_2_"+a).attr("required",!1)):(e.find("#give-gift-aid-address-button-"+a).hide(),e.find("#give-gift-aid-address-fields-"+a).show(),n.find("input:text,input[type=email],select, textarea").attr("required",!0),n.find("#give_gift_aid_card_address_2_"+a).attr("required",!1))}).change(),t.on("click",".give-gift-aid-explanation-content-more",function(){var e=i(this).closest(".give-donation-grid-item-form"),t=e.attr("id"),d=i('a[href="#'+t+'"]'),n=d.attr("id"),r=0;e.length>0&&(r=300);var s=i(this).closest("form.give-form");s||(s=i(this).parents("form"));var _=s.find(".give-gift-aid-long-explanation-wrap"),g=s.find('input[name="give-form-id"]').val(),o=s.find("#give-gift-aid-long-explanation-wrap"+g),c=s.find("#give-gift-aid-long-explanation-content-"+g);e.length>0&&jQuery.magnificPopup.close(),setTimeout(function(){jQuery.magnificPopup.open({mainClass:give_global_vars.magnific_options.main_class,closeOnBgClick:give_global_vars.magnific_options.close_on_bg_click,fixedContentPos:!0,fixedBgPos:!0,removalDelay:300,items:{src:_,type:"inline"},callbacks:{open:function(){o.addClass("mfp-show"),o.removeClass("mfp-hide"),c.addClass("mfp-show")},close:function(){o.removeClass("mfp-show"),o.addClass("mfp-hide"),setTimeout(function(){i(".js-give-grid-modal-launcher#"+n).click()},100)}}}),a.give_gift_aid_check_display_option(s)},r)}),t.on("click",".give_gift_aid_take_to_my_donation",function(){var e=i(".give-gift-aid-long-explanation-wrap").data("id"),t=i(this).parents().find(".give-form-"+e),a=t.find('input[name="give-form-id"]').val();i("#give-form-"+a+"-wrap").is(".give-display-modal, .give-display-button")?(t.find(".give-btn-modal").trigger("click"),i(".mfp-close").show()):i(".mfp-close").trigger("click")}),t.on("change",'select[name="give-cs-currency"]',function(){var e=i(this).closest("form.give-form");e||(e=i(this).parents("form")),a.give_currency_switcher_currency_update(e,i(this).val())}).change(),t.on("click","#give-payment-mode-select input",function(){a.init()}),i("input.give-gateway").on("change",function(){var t=i(this).closest("form.give-form"),d=i(this).val(),n=give_gift_aid_vars.gift_aid_site_url+"/wp-admin/admin-ajax.php?payment-mode="+d;t||(t=i(this).parents("form")),i(document).ajaxComplete(function(i,d,r){var s=r.url;s===n&&(a.give_gift_aid_check_address_option(t),a.give_gift_aid_check_billing_country(t),a.give_gift_aid_check_billing_details(t),e(t,!1))})});var a={init:function(){i(".give-form-wrap").each(function(){var e=i(this).find(".give-form"),t=i('select[name="give-cs-currency"]');a.give_gift_aid_check_billing_country(e),a.give_gift_aid_check_address_option(e),a.give_gift_aid_check_billing_details(e),a.give_gift_aid_check_display_option(e),t.length>0?a.give_currency_switcher_currency_update(e,t.val()):a.give_currency_switcher_currency_update(e,give_global_vars.currency)})},give_gift_aid_check_address_option:function(i){var t=i.find('input[name="give-form-id"]').val(),a=i.find('input[name="give_gift_aid_address_option"]:radio:checked').val(),d=i.find("#give-gift-aid-address-fields-"+t),n=i.find("#give-gift-aid-address-wrap-"+t);n.hide();var r=i.find(".give_gift_aid_accept_term_condition").is(":checked");r&&n.show(),"another_address"===a?(d.show(),e(i,!0)):(d.hide(),e(i,!1))},give_gift_aid_check_billing_details:function(i){var e=i.find('input[name="give-form-id"]').val();i.find(".cc-address").length>0?(i.find("#give-gift-aid-address-button-"+e).show(),i.find("#give-gift-aid-address-fields-"+e).hide()):(i.find("#give-gift-aid-address-button-"+e).hide(),i.find("#give-gift-aid-address-fields-"+e).show())},give_gift_aid_check_display_option:function(e){var t=e.find('input[name="give-form-id"]').val(),a=i("#give-form-"+t+"-wrap");(a.hasClass("give-display-button")||a.hasClass("give-display-modal"))&&i(".mfp-close").remove()},give_gift_aid_check_billing_country:function(e){var t=e.find('select[name="billing_country"]').val(),a=e.find('input[name="give-form-id"]').val(),d=e.find("#give-gift-aid-address-wrap-"+a),n=e.find("#give-gift-aid-dedicate-donation-"+a),r=i(".give_gift_aid_address_option:checked").val(),s=i('select[name="give-cs-currency"]'),_="";"undefined"==typeof t&&(t=give_gift_aid_vars.gift_aid_base_country),_=s.length>0?s.val():give_global_vars.currency,"GB"===t&&"GBP"===_?(n.show(),"another_address"===r&&(d.find("input:text,input[type=email],select, textarea").attr("required",!0),d.find("#give_gift_aid_card_address_2_"+a).attr("required",!1))):(n.hide(),"another_address"===r&&(d.find("input:text,input[type=email],select, textarea").attr("required",!1),d.find("#give_gift_aid_card_address_2_"+a).attr("required",!1)))},give_currency_switcher_currency_update:function(e,t){var a=e.find('input[name="give-form-id"]').val(),d=e.find("#give-gift-aid-address-wrap-"+a),n=e.find("#give-gift-aid-dedicate-donation-"+a),r=i(".give_gift_aid_address_option:checked").val(),s=i("#billing_country").val();"undefined"==typeof s&&(s=give_gift_aid_vars.gift_aid_base_country),"GBP"===t&&"GB"===s?(n.show(),"another_address"===r&&(d.find("input:text,input[type=email],select, textarea").attr("required",!0),d.find("#give_gift_aid_card_address_2_"+a).attr("required",!1))):(n.hide(),"another_address"===r&&(d.find("input:text,input[type=email],select, textarea").attr("required",!1),d.find("#give_gift_aid_card_address_2_"+a).attr("required",!1)))}};a.init()});