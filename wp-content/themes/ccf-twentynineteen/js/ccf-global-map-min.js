jQuery(function(o){var t=L.map("map-affiliates",{center:[0,0],zoom:1,minZoom:1,maxZoom:8,zoomSnap:.25,zoomDelta:.5,scrollWheelZoom:!1,zoomControl:!1,attributionControl:!1});L.tileLayer.provider("Stamen.Watercolor").addTo(t);var e=L.Icon.extend({options:{iconSize:[50,50],iconAnchor:[25,50]}}),i=path.templateUrl,n=new e({iconUrl:i+"/images/map-flag.svg"}),a=new e({iconUrl:i+"/images/map-flag-affiliate.svg"}),p=new e({iconUrl:i+"/images/map-flag-chapter.svg"}),s=new e({iconUrl:i+"/images/map-flag-partner.svg"}),c={riseOnHover:!0,icon:e},l={maxWidth:300,className:"rounded-0",closeButton:!1,offset:[0,-40]};L.control.zoom({position:"bottomleft",zoomInText:'<span class="fas fa-plus"></span>',zoomOutText:'<span class="fas fa-minus"></span>'}).addTo(t),affiliates=[],o(map_locations).each(function(){id=this.id,title=this.title,selectedIcon=this.icon,city=this.city,text=this.popupText,latitude=this.latitude,longitude=this.longitude,"officeIcon"==this.icon&&(selectedIcon=n,locationType="Headquarters"),"affiliateIcon"==this.icon&&(selectedIcon=a,locationType="Affiliate"),"chapterIcon"==this.icon&&(selectedIcon=p,locationType="Chapter"),"partnerIcon"==this.icon&&(selectedIcon=s,locationType="Partner"),mapLocation={type:"Feature",properties:{name:title,popupContent:'<p class="title"><a href="#'+id+'"><strong>'+title+'</strong></a></p><p class="city">'+city+'</p><p class="type">'+locationType+'</p><p class="info">'+text+"</p>",icon:selectedIcon},geometry:{type:"Point",coordinates:[latitude,longitude]}},affiliates.push(mapLocation)});var r=L.geoJSON(affiliates,{pointToLayer:function(o,t){return L.marker(t,c)},onEachFeature:function(o,t){o.properties&&o.properties.popupContent&&t.bindPopup(o.properties.popupContent,l),o.properties&&o.properties.icon&&t.setIcon(o.properties.icon)}}).addTo(t);function m(){var e=0,i=r.getBounds(),n=o("#map-affiliates").width();n>400&&(t.options.minZoom=1.25),n>600&&(e=30,t.options.minZoom=1.5),n>800&&(t.options.minZoom=2),n>1e3&&(e=60,t.options.minZoom=2.25),n>1200&&(t.options.minZoom=2.5),n>1400&&(t.options.minZoom=2.75),n>1600&&(t.options.minZoom=3),t.fitBounds(i,{padding:[e,e]})}m(),t.on("resize",function(){m()}),t.on("popupopen",function(){o(".leaflet-popup-content a[href*=\\#]").click(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")||location.hostname===this.hostname){var t=o(this.hash);if((t=t.length?t:o("[name="+this.hash.slice(1)+"]")).length)return o("html,body").animate({scrollTop:t.offset().top-32},800),!1}})})});